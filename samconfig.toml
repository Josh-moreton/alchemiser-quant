# SAM configuration for The Alchemiser Quantitative Trading System
version = 0.1

[default.build.parameters]
beta_features = true
use_container = false

[default.deploy.parameters]
stack_name = "alch-production"
region = "us-east-1"
capabilities = "CAPABILITY_IAM CAPABILITY_NAMED_IAM"
disable_rollback = false
confirm_changeset = false
fail_on_empty_changeset = false
resolve_s3 = true
image_repositories = []

[dev.deploy.parameters]
stack_name = "alch-dev"
region = "us-east-1"
capabilities = "CAPABILITY_IAM CAPABILITY_NAMED_IAM"
disable_rollback = false
confirm_changeset = false
fail_on_empty_changeset = false
resolve_s3 = true
# Provide stage parameter required by the template.
# Note: EquityDeploymentPct comes from EQUITY_DEPLOYMENT_PCT env var via deploy.sh
parameter_overrides = [
	"Stage=dev",
]

[staging.deploy.parameters]
stack_name = "alch-staging"
region = "us-east-1"
capabilities = "CAPABILITY_IAM CAPABILITY_NAMED_IAM"
disable_rollback = false
confirm_changeset = false
fail_on_empty_changeset = false
resolve_s3 = true
# Staging parameters required by the template; credentials loaded from environment
parameter_overrides = [
	"Stage=staging",
]

[prod.deploy.parameters]
stack_name = "alch-production"
region = "us-east-1"
capabilities = "CAPABILITY_IAM CAPABILITY_NAMED_IAM"
disable_rollback = false
confirm_changeset = false
fail_on_empty_changeset = false
resolve_s3 = true
# Prod parameters required by the template; credentials loaded via Secrets Manager
parameter_overrides = [
	"Stage=production",
]

[ephemeral.build.parameters]
beta_features = true
use_container = false

[ephemeral.deploy.parameters]
# Stack name will be provided dynamically via CLI
region = "us-east-1"
capabilities = "CAPABILITY_IAM CAPABILITY_NAMED_IAM"
disable_rollback = false
confirm_changeset = false
fail_on_empty_changeset = false
resolve_s3 = true
# Ephemeral parameters will be provided via CLI
parameter_overrides = [
	"Stage=ephemeral",
]


